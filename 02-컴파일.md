# 타입스크립트 컴파일

```
tsc hello.ts
tsc hello.ts --target es6
```

## 1. ES5로 컴파일 시 `Promise`

-   ES5로 컴파일을 하면 다음과 같이 `Promise`를 찾을 수 없다고 나온다.
-   ES5에서는 `Promise`라는 새로운 타입이 없기 때문에 polyfill을 추가해야 하기 때문이다.
-   그런데 script type을 전역에 라이브러리(lib)를 추가하면 동작에 문제가 없으므로 옵션을 설정하면 된다.

> error TS2585: 'Promise' only refers to a type, but is being used as a value here. Do you need to change your target library? Try changing the `lib` compiler option to es2015 or later.
> 4 let timeoutPromise = new Promise((resolve, reject) => {

-   그러므로 다음과 같이 `tsc`에 옵션을 지정하여 컴파일을 시도해 보자.

```
tsc hello.ts --lib es2015.promise
```

-   🙄 오류 안 날 거 처럼 이야기하더니.. 났잖아?

> error TS2318: Cannot find global type 'Array'.
> error TS2318: Cannot find global type 'Boolean'.  
> error TS2318: Cannot find global type 'Function'.  
> error TS2318: Cannot find global type 'IArguments'.
> error TS2318: Cannot find global type 'Number'.
> error TS2318: Cannot find global type 'Object'.
> error TS2318: Cannot find global type 'RegExp'.
> error TS2318: Cannot find global type 'String'.
>
> Found 8 errors.

이러한 오류가 나는 이유는 Promise에서 추가되는 Iterable 등의 다른 타입까지 지정해야 하기 때문이다.
그러므로 다음과 같이 명령어를 지정하게 되면 이제 오류없이 컴파일되는 것을 확인할 수 있다.

```
tsc .\src\01-compile\hello.ts --lib es2015.promise,es2015.iterable,dom
```

-   여기서 dom은 `console.log`를 사용하기 위해 필요하다.

자! 여기서 오해하지 말아야 할 것이.. 컴파일이 무사히 됐다고 해서 라이브러리가 포함돼서 컴파일되는 것이 아니다.
`--lib`는 전역에 해당 객체가 존재한다고 가정하고 컴파일을 진행하는 것이기 때문에 실행 시점에서 이 객체(Promise)를 전역에서 찾게 될 것이다.
